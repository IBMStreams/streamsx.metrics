<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Filter document"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_page"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>Filter document</title>
</head>
<body id="spldoc_page">


<h1 class="title topictitle1">Filter document</h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">IBMStreams streamsx.monitoring Toolkit</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.monitoring.html">com.ibm.streamsx.monitoring 1.5.0</a> &gt; <a class="xref" href="ns$com.ibm.streamsx.monitoring.metrics.html">com.ibm.streamsx.monitoring.metrics</a> &gt; <a class="xref" href="op$com.ibm.streamsx.monitoring.metrics$MetricsSource.html">MetricsSource</a> &gt; Filter document</p>

</div>


<div class="section">
<p class="p">The filter document specifies patterns for domain, instance, job, operator, and metric names, and their relations.
</p>

<p class="p">Only those objects (and their parents) that match the specified filters, are monitored.
</p>

<p class="p">It also specifies which name patterns are related, for example: For a domain X monitor all instances, whereas in each instance only jobs with a Y in their names shall be evaluated. For another domain Z, only jobs with a name ending with XYZ, are monitored, etc.
</p>

<p class="p">The filter document is a JSON-encoded text file or JSON-encoded String that is configured with the <strong class="ph b">filterDocument</strong> parameter.
</p>

<p class="p">If the <strong class="ph b">applicationConfigurationName</strong> parameter is specified, the application configuration can override the <strong class="ph b">filterDocument</strong> parameter value. The JSON-formatted document specifies filters as regular expressions. Each regular expression must follow the rules that are specified for Java <a class="xref" href="https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html">Pattern</a>.
</p>

<p class="p">The following filter document example specifies to collect all PE and operator metrics available in all jobs and instances:
</p>

<div class="p">
<pre class="pre codeblock">
[
  {
    "domainIdPatterns":".*",
    "instances":
    [
      {
        "instanceIdPatterns":".*",
        "jobs":
        [
          {
            "jobNamePatterns":".*",
            "pes":
            [
              {
                "metricNamePatterns":".*",
                "inputPorts":
                [
                  {
                    "portIndexes":"*",
                    "metricNamePatterns":".*"
                  }
                ],
                "outputPorts":
                [
                  {
                    "portIndexes":"*",
                    "metricNamePatterns":".*"
                  }
                ],
                "connections":
                [
                  {
                    "connectionIdPatterns":".*",
                    "metricNamePatterns":".*"
                  }
                ]
              }
            ],
            "operators":
            [
              {
                "operatorNamePatterns":".*",
                "metricNamePatterns":".*",
                "inputPorts":
                [
                  {
                    "portIndexes":"*",
                    "metricNamePatterns":".*"
                  }
                ],
                "outputPorts":
                [
                  {
                    "portIndexes":"*",
                    "metricNamePatterns":".*"
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
]
</pre>


</div>

<p class="p">The following filter document example selects two custom metrics names <em class="ph i">nBytesWritten</em> and <em class="ph i">nObjects</em> of a custom <em class="ph i">Storage</em> operator in the <em class="ph i">StreamsInstance</em> instance and <em class="ph i">StreamsDomain</em> domain only:
</p>

<div class="p">
<pre class="pre codeblock">
[
  {
    "domainIdPatterns":"StreamsDomain",
    "instances":
    [
      {
        "instanceIdPatterns":"StreamsInstance",
        "jobs":
        [
          {
            "jobNamePatterns":".*",
            "operators":
            [
              {
                "operatorNamePatterns":"Storage",
                "metricNamePatterns":
                [
                  "nBytesWritten",
                  "nObjects"
                ]
              }
            ]
          }
        ]
      }
    ]
  }
]
</pre>


</div>

</div>

</div>


</body>
</html>