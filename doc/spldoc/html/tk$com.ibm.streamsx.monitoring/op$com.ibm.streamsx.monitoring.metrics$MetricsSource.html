<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Operator MetricsSource"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_operator"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>Operator MetricsSource</title>
</head>
<body id="spldoc_operator">


<h1 class="title topictitle1">Operator <tt class="ph tt">MetricsSource</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">IBMStreams streamsx.monitoring Toolkit</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.monitoring.html">com.ibm.streamsx.monitoring 1.6.0</a> &gt; <a class="xref" href="ns$com.ibm.streamsx.monitoring.metrics.html">com.ibm.streamsx.monitoring.metrics</a> &gt; MetricsSource</p>

</div>

<div class="section splprimop">
  <embed class="image" src="../../image/tk$com.ibm.streamsx.monitoring/op$com.ibm.streamsx.monitoring.metrics$MetricsSource.svg" width="872" height="112"/>
</div>

<div class="section">

<p class="p">The MetricsSource operator uses the <a class="xref" href="http://www.ibm.com/support/knowledgecenter/SSCRJU_4.2.0/com.ibm.streams.ref.doc/doc/jmxapi.html">JMX</a> API to retrieve metrics from one or more jobs, and provides metric changes as tuple stream.
</p>

<p class="p">As an application developer, you provide the so-called filter document. The filter document specifies patterns for domain, instance, job, operator, and metric names. It also specifies which name patterns are related, for example: For a domain X monitor all instances, whereas in each instance only jobs with a Y in their names shall be evaluated. For another domain Z, only jobs with a name ending with XYZ, are monitored, etc.
</p>

<p class="p">If the MetricsSource evaluates whether, for example, a custom metric of an operator shall be retrieved periodically, the name patterns are applied. A custom metric is uniquely identified with the domain, instance, job, operator, and metric name. All these parts must match to the corresponding set of related name patterns.
</p>

<p class="p">Per default, the MetricsSource operator monitors all metrics in the current domain and instance, if filter document is not specified. The MetricsSource operator monitors filter-matching domains, instances, and jobs that are running while the application that uses the MetricsSource operator, starts. Furthermore, the operator gets notifications for created and deleted instances, and submitted and cancelled jobs. Thererfore, the operator can retrieve metrics from filter-matching jobs that are submitted in the future.
</p>

  <dl class="dl"><dt class="dt dlterm"><a class="xref" href="op$com.ibm.streamsx.monitoring.metrics$MetricsSource$1.html">Filter document</a>
</dt>
<dd class="dd">
</dd>
</dl>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Summary</h2>

<dl class="dl" compact="compact">
 
  <dt class="dt dlterm">Ports</dt>

  <dd class="dd">This operator has 0 input ports and 2 output ports.</dd>

 
 
  <dt class="dt dlterm">Windowing</dt>

  <dd class="dd">This operator does not accept any windowing configurations.</dd>

 
 
  <dt class="dt dlterm">Parameters</dt>

  <dd class="dd">This operator supports 11 parameters.
<p class="p"> Optional: 
<a class="xref" href="#spldoc_operator__parameter__applicationConfigurationName">applicationConfigurationName</a>, <a class="xref" href="#spldoc_operator__parameter__connectionURL">connectionURL</a>, <a class="xref" href="#spldoc_operator__parameter__domainId">domainId</a>, <a class="xref" href="#spldoc_operator__parameter__emitMetricTuple">emitMetricTuple</a>, <a class="xref" href="#spldoc_operator__parameter__filterDocument">filterDocument</a>, <a class="xref" href="#spldoc_operator__parameter__iamApiKey">iamApiKey</a>, <a class="xref" href="#spldoc_operator__parameter__iamTokenEndpoint">iamTokenEndpoint</a>, <a class="xref" href="#spldoc_operator__parameter__password">password</a>, <a class="xref" href="#spldoc_operator__parameter__scanPeriod">scanPeriod</a>, <a class="xref" href="#spldoc_operator__parameter__sslOption">sslOption</a>, <a class="xref" href="#spldoc_operator__parameter__user">user</a>

</p>
</dd>

 
 
  <dt class="dt dlterm">Metrics</dt>

  <dd class="dd">This operator reports 3 metrics.</dd>

 
</dl>
</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Properties</h2>

<dl class="dl" compact="compact">
 
  <dt class="dt dlterm">Implementation</dt>

  <dd class="dd">Java</dd>

 
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set">Output Ports</a></strong></p>
<dl class="dl">
  
     <dt class="dt dlterm">Assignments</dt>

       <dd class="dd">Java operators do not support output assignments.
       </dd>

  
</dl>

<dl class="dl">
  
   <dt class="dt dlterm">Ports (0)</dt>

   <dd class="dd">

<p class="p">The MetricsSource operator emits a metric tuple to this output port for each metric, for which the operator identifies a changed value. You can use the <a class="xref" href="spl$com.ibm.streamsx.monitoring.metrics$Types.html#spldoc_compilationunit__type__Notification">Notification</a> tuple type, or any subset of the attributes specified for this type. After each scan cycle, the operator emits a WindowMarker to this port.
</p>

<p class="p"/>

   <dl class="dl">
    
      <dt class="dt dlterm">Properties</dt>

      <dd class="dd">
   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__optional">Optional</a>: false
     </li>

   </ul>

   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__windowpunctuationoutputmode">WindowPunctuationOutputMode</a>: Generating
     </li>

   </ul>

      </dd>

    
   </dl>

   <p class="p"/>

   </dd>

  
  
   <dt class="dt dlterm">Ports (1)</dt>

   <dd class="dd">

<p class="p">Emits tuples containing JMX connection notifications. The notification type is one of the following:
</p>

<div class="p">
<ul class="ul">
<li class="li"> jmx.remote.connection.opened</li>

<li class="li"> jmx.remote.connection.closed</li>

<li class="li"> jmx.remote.connection.failed</li>

<li class="li"> jmx.remote.connection.notifs.lost</li>

</ul>

</div>

<p class="p">You can use the <a class="xref" href="spl$com.ibm.streamsx.monitoring.jmx$Types.html#spldoc_compilationunit__type__ConnectionNotification">ConnectionNotification</a> tuple type, or any subset of the attributes specified for this type.
</p>

<p class="p"/>

   <dl class="dl">
    
      <dt class="dt dlterm">Properties</dt>

      <dd class="dd">
   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__optional">Optional</a>: true
     </li>

   </ul>

   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__windowpunctuationoutputmode">WindowPunctuationOutputMode</a>: Free
     </li>

   </ul>

      </dd>

    
   </dl>

   <p class="p"/>

   </dd>

  
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters">Parameters</a></strong></p>
This operator supports 11 parameters.
<p class="p"> Optional: 
<a class="xref" href="#spldoc_operator__parameter__applicationConfigurationName">applicationConfigurationName</a>, <a class="xref" href="#spldoc_operator__parameter__connectionURL">connectionURL</a>, <a class="xref" href="#spldoc_operator__parameter__domainId">domainId</a>, <a class="xref" href="#spldoc_operator__parameter__emitMetricTuple">emitMetricTuple</a>, <a class="xref" href="#spldoc_operator__parameter__filterDocument">filterDocument</a>, <a class="xref" href="#spldoc_operator__parameter__iamApiKey">iamApiKey</a>, <a class="xref" href="#spldoc_operator__parameter__iamTokenEndpoint">iamTokenEndpoint</a>, <a class="xref" href="#spldoc_operator__parameter__password">password</a>, <a class="xref" href="#spldoc_operator__parameter__scanPeriod">scanPeriod</a>, <a class="xref" href="#spldoc_operator__parameter__sslOption">sslOption</a>, <a class="xref" href="#spldoc_operator__parameter__user">user</a>

</p>
<dl class="dl">

<dt class="dt dlterm"><a name="spldoc_operator__parameter__applicationConfigurationName"><!-- --></a><tt class="ph tt">applicationConfigurationName</tt></dt>

<dd class="dd">
<p class="p">Specifies the name of <a class="xref" href="https://www.ibm.com/support/knowledgecenter/en/SSCRJU_4.2.0/com.ibm.streams.admin.doc/doc/creating-secure-app-configs.html">application configuration object</a> that can contain domainId, connectionURL, user, password, iamApiKey, iamTokenEndpoint and filterDocument properties. The application configuration overrides values that are specified with the corresponding parameters.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__connectionURL"><!-- --></a><tt class="ph tt">connectionURL</tt></dt>

<dd class="dd">
<p class="p">Specifies the connection URL as returned by the <tt class="ph tt">streamtool getjmxconnect</tt> command. If the <strong class="ph b">applicationConfigurationName</strong> parameter is specified, the application configuration can override this parameter value.If not specified and the domainId parameter value equals the domain id under which this operator is running, then the operator uses the <tt class="ph tt">streamtool getjmxconnect</tt> command to get the value.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__domainId"><!-- --></a><tt class="ph tt">domainId</tt></dt>

<dd class="dd">
<p class="p">Specifies the domain id that is monitored. If no domain id is specified, the domain id under which this operator is running is used. If the operator is running in a standalone application it raises an exception and aborts. If the <strong class="ph b">applicationConfigurationName</strong> parameter is specified, the application configuration can override this parameter value.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__emitMetricTuple"><!-- --></a><tt class="ph tt">emitMetricTuple</tt></dt>

<dd class="dd">
<p class="p">Specifies when to emit a tuple for a metric. Supported modes are:
</p>

<div class="p">
<ul class="ul">
<li class="li"> <strong class="ph b">periodic</strong>
<p class="p">  For each monitored metric a tuple is emitted during each scan cycle.
</p>
</li>

<li class="li">
<p class="p"> <strong class="ph b">onChangedValue</strong> (default)
</p>

<p class="p">  For each monitored metric a tuple is emitted during each scan cycle if the metric value changed.
</p>
</li>

</ul>

</div>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: com.ibm.streamsx.monitoring.jmx.internal.EmitMetricTupleMode
 (<tt class="ph tt">periodic, onChangedValue</tt>)  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__expressionmode">ExpressionMode</a>: CustomLiteral
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__filterDocument"><!-- --></a><tt class="ph tt">filterDocument</tt></dt>

<dd class="dd">
<p class="p">Specifies the either a path to a JSON-formatted document or a JSON-formatted String that specifies the domain, instance, job, operator, and metric name filters as regular expressions. Each regular expression must follow the rules that are specified for Java <a class="xref" href="https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html">Pattern</a>. If the <strong class="ph b">applicationConfigurationName</strong> parameter is specified, the application configuration can override this parameter value.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__iamApiKey"><!-- --></a><tt class="ph tt">iamApiKey</tt></dt>

<dd class="dd">
<p class="p">Specifies IAM API Key. Relevant for IAM authentication case only. If parameter is set, then the parameters user and password are ignored.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__iamTokenEndpoint"><!-- --></a><tt class="ph tt">iamTokenEndpoint</tt></dt>

<dd class="dd">
<p class="p">Specifies IAM token endpoint. Relevant for IAM authentication case only. If parameter is not set, then the global endpoint is used: https://iam.bluemix.net/identity/token
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__password"><!-- --></a><tt class="ph tt">password</tt></dt>

<dd class="dd">
<p class="p">Specifies the password that is required for the JMX connection. If the <strong class="ph b">applicationConfigurationName</strong> parameter is specified, the application configuration can override this parameter value.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__scanPeriod"><!-- --></a><tt class="ph tt">scanPeriod</tt></dt>

<dd class="dd">
<p class="p">Specifies the period after which a new metrics scan is initiated. The default is 5.0 seconds.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: float64
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__sslOption"><!-- --></a><tt class="ph tt">sslOption</tt></dt>

<dd class="dd">
<p class="p">Specifies the sslOption that is required for the JMX connection. If the <strong class="ph b">applicationConfigurationName</strong> parameter is specified, the application configuration can override this parameter value.If not specified and the domainId parameter value equals the domain id under which this operator is running, then the operator uses the <tt class="ph tt">streamtool getdomainproperty</tt> command to get the value.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__user"><!-- --></a><tt class="ph tt">user</tt></dt>

<dd class="dd">
<p class="p">Specifies the user that is required for the JMX connection. If the <strong class="ph b">applicationConfigurationName</strong> parameter is specified, the application configuration can override this parameter value.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>


</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__metrics">Metrics</a></strong></p>
<dl class="dl">
  
    <dt class="dt dlterm"><tt class="ph tt">isConnected</tt> - <a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__metrics_kind_gauge">Gauge</a></dt>

    <dd class="dd">

<p class="p">Value 1 indicates, that this operator is connected to JMX service. Otherwise value 0 is set, if no connection is established.
</p>

     <p class="p"/>

     </dd>

  
  
    <dt class="dt dlterm"><tt class="ph tt">nBrokenJMXConnections</tt> - <a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__metrics_kind_counter">Counter</a></dt>

    <dd class="dd">

<p class="p">Number of broken JMX connections that have occurred. Notifications may have been lost.
</p>

     <p class="p"/>

     </dd>

  
  
    <dt class="dt dlterm"><tt class="ph tt">nJMXConnectionAttempts</tt> - <a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__metrics_kind_counter">Counter</a></dt>

    <dd class="dd">

<p class="p">Number of connection attempts to JMX service.
</p>

     <p class="p"/>

     </dd>

  
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__dependencies">Libraries</a></strong></p>

 <dl class="dl">
 
  <dt class="dt dlterm">Operator class library
  </dt>

  <dd class="dd"/>

  <dd class="dd"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__dependencies__managedlibrary__libpath">Library Path</a>: <tt class="ph tt">../../impl/lib/com.ibm.streamsx.monitoring.jar</tt></dd>

 
 </dl>

</div>

</div>


</body>
</html>